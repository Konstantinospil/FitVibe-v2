%% Source: TDD | Section: n/a | Heading: F1. Backend Highâ€‘Level Architecture (Context)
flowchart LR
  subgraph Client
    FE[SPA: React + Axios]
  end
  FE -->|HTTPS /api/v1| NGINX[NGINX TLS + HSTS]
  NGINX --> API[Express App]

  subgraph API[Express App: Node 20 + TS]
    direction TB
    RT[Routers/Controllers] --> SV[Services]
    SV --> REPO[Repositories: Knex]
    RT --> MW[Security Middleware: Helmet, CORS, Rate Limit, CSRF]
    RT --> VAL[Validation: zod DTOs]
    API_LOG[Logging: pino/morgan]
  end

  REPO --> PG[PostgreSQL 18]
  SV --> MAIL[Mailer Abstraction]
  SV -. future .-> JOBS[Job Queue: BullMQ/Temporal]
  class JOBS future;
