prd_ref,requirement_desc,ac_id,tdd_anchor,vdd_anchor,test_id,test_path,type,evidence_path,owner,status,last_run,risk,notes
FR-1 User Mgmt & Security,Email verification before login; TTL 15m; resend ≤3/h; purge ≤7d,AC-1.1,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.1,apps/backend/tests/api/auth/verify_email.test.ts,integration,reports/security/AC-1.1.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,Lockout after 10 failed logins; CAPTCHA on unlock,AC-1.2,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.2,apps/backend/tests/api/auth/lockout_rate_limit.test.ts,integration,reports/security/AC-1.2.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,Password policy ≥12 chars; mixed classes,AC-1.3,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.3,apps/backend/tests/api/auth/password_policy.test.ts,unit,reports/security/AC-1.3.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,GDPR export/delete ≤30d,AC-1.4,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.4,apps/backend/tests/api/auth/dsr_sla.e2e.ts,e2e,reports/security/AC-1.4.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,2FA (TOTP) enrollment gated by password; 10 backup codes,AC-1.5,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.5,apps/backend/tests/api/auth/totp_enroll.test.ts,integration,reports/security/AC-1.5.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,2FA login requires TOTP/backup code (burn after use),AC-1.6,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.6,apps/backend/tests/api/auth/totp_login.e2e.ts,e2e,reports/security/AC-1.6.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,Admin endpoints enforce role=admin; no IDOR,AC-1.7,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.7,apps/backend/tests/api/auth/admin_rbac.test.ts,security,reports/security/AC-1.7.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,Verify resend limit 3/hour; auto-purge unverified @7d,AC-1.8,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.8,apps/backend/tests/api/auth/verify_resend_limit.test.ts,integration,reports/security/AC-1.8.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,Reset token single-use; TTL 15m; revoke refresh on success,AC-1.9,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.9,apps/backend/tests/api/auth/password_reset_security.test.ts,security,reports/security/AC-1.9.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,Refresh rotation; reuse → family revoke; logout clears sessions,AC-1.10,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.10,apps/backend/tests/api/auth/refresh_rotation.test.ts,integration,reports/security/AC-1.10.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,JWKS/Key rotation grace window,AC-1.11,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.11,apps/backend/tests/api/auth/jwks_rotation.test.ts,integration,reports/security/AC-1.11.html,QA:Auth,pending,,High,
FR-1 User Mgmt & Security,No user enumeration; timing variance ≤10%,AC-1.12,TDD §4.2 Auth; §5 Security; §12 Compliance,,AC-1.12,apps/backend/tests/api/auth/no_user_enum.timing.test.ts,security,reports/security/AC-1.12.html,QA:Auth,pending,,High,
FR-2 Profile & Settings,Alias unique (case-insensitive),AC-2.1,TDD §4.3 Users; §6 Modules,,AC-2.1,apps/backend/tests/api/users/alias_unique.test.ts,integration,reports/AC-2.1.json,QA:Profile,pending,,Medium,
FR-2 Profile & Settings,"Avatar ≤5MB (JPEG/PNG/WebP), renders in UI",AC-2.2,TDD §4.3 Users; §6 Modules,,AC-2.2,apps/backend/tests/api/users/avatar_upload_render.e2e.ts,e2e,reports/AC-2.2.json,QA:Profile,pending,,Medium,
FR-2 Profile & Settings,Each update snapshots to user_state_history,AC-2.3,TDD §4.3 Users; §6 Modules,,AC-2.3,apps/backend/tests/api/users/user_state_history.test.ts,integration,reports/AC-2.3.json,QA:Profile,pending,,Medium,
FR-2 Profile & Settings,DOB & gender immutable post-creation (422),AC-2.4,TDD §4.3 Users; §6 Modules,,AC-2.4,apps/backend/tests/api/users/immutable_fields.test.ts,contract,reports/AC-2.4.json,QA:Profile,pending,,Medium,
FR-2 Profile & Settings,Uploads AV-scanned; EICAR blocked (400 + audit),AC-2.5,TDD §4.3 Users; §6 Modules,,AC-2.5,apps/backend/tests/api/users/upload_av_scan.security.test.ts,security,reports/AC-2.5.json,QA:Profile,pending,,Medium,
FR-3 Exercise Library,Delete archives (soft-delete),AC-3.1,TDD §4.4 Exercises,,AC-3.1,apps/backend/tests/api/exercises/soft_delete.test.ts,integration,reports/AC-3.1.json,QA:Exercises,pending,,Medium,
FR-3 Exercise Library,Public visibility flag controls feed discovery,AC-3.2,TDD §4.4 Exercises,,AC-3.2,apps/backend/tests/api/exercises/visibility_feed.e2e.ts,e2e,reports/AC-3.2.json,QA:Exercises,pending,,Medium,
FR-3 Exercise Library,Name snapshot retained in session_exercises,AC-3.3,TDD §4.4 Exercises,,AC-3.3,apps/backend/tests/api/exercises/name_snapshot.db.test.ts,db,reports/AC-3.3.json,QA:Exercises,pending,,Medium,
FR-3 Exercise Library,Global RBAC: only admins manage global exercises; audit,AC-3.4,TDD §4.4 Exercises,,AC-3.4,apps/backend/tests/api/exercises/rbac_global_exercises.security.test.ts,security,reports/AC-3.4.json,QA:Exercises,pending,,Medium,
FR-4 Sessions (Plan/Log/Clone),Timezone-safe timestamps (DST verified),AC-4.1,TDD §4.5 Sessions,,AC-4.1,apps/backend/tests/api/sessions/tz_safe.timestamps.test.ts,integration,reports/AC-4.1.json,QA:Sessions,pending,,High,
FR-4 Sessions (Plan/Log/Clone),Planned vs Actual comparison visible,AC-4.2,TDD §4.5 Sessions,,AC-4.2,apps/backend/tests/api/sessions/planned_vs_actual.e2e.ts,e2e,reports/AC-4.2.json,QA:Sessions,pending,,High,
FR-4 Sessions (Plan/Log/Clone),Clone preserves attribution,AC-4.3,TDD §4.5 Sessions,,AC-4.3,apps/backend/tests/api/sessions/clone_attribution.e2e.ts,e2e,reports/AC-4.3.json,QA:Sessions,pending,,High,
FR-4 Sessions (Plan/Log/Clone),RRULE expansion DST-safe across TZ,AC-4.4,TDD §4.5 Sessions,,AC-4.4,apps/backend/tests/api/sessions/rrule_dst.unit.test.ts,unit,reports/AC-4.4.json,QA:Sessions,pending,,High,
FR-4 Sessions (Plan/Log/Clone),Cancelled instances excluded from streaks/points,AC-4.5,TDD §4.5 Sessions,,AC-4.5,apps/backend/tests/api/sessions/cancelled_instances.integration.test.ts,integration,reports/AC-4.5.json,QA:Sessions,pending,,High,
FR-4 Sessions (Plan/Log/Clone),Public→private purge from feed/search ≤5 min,AC-4.6,TDD §4.5 Sessions,,AC-4.6,apps/backend/tests/api/sessions/privacy_toggle_feed.security.e2e.ts,e2e,reports/AC-4.6.json,QA:Sessions,pending,,High,
FR-5 Progress & Analytics,Aggregations by date & category accurate,AC-5.1,TDD §4.6 Progress; §10 Perf,,AC-5.1,apps/backend/tests/api/analytics/aggregations.unit.test.ts,unit,reports/AC-5.1.json,QA:Analytics,pending,,Medium,
FR-5 Progress & Analytics,PBs & streaks calculated correctly,AC-5.2,TDD §4.6 Progress; §10 Perf,,AC-5.2,apps/backend/tests/api/analytics/pbs_streaks.integration.test.ts,integration,reports/AC-5.2.json,QA:Analytics,pending,,Medium,
FR-5 Progress & Analytics,Export CSV/JSON valid,AC-5.3,TDD §4.6 Progress; §10 Perf,,AC-5.3,apps/backend/tests/api/analytics/export_formats.e2e.ts,e2e,reports/AC-5.3.json,QA:Analytics,pending,,Medium,
FR-6 Points System,Points auto-awarded on session.complete(),AC-6.1,TDD §4.7 Points,,AC-6.1,apps/backend/tests/api/points/award_on_complete.integration.test.ts,integration,reports/AC-6.1.json,QA:Points,pending,,Medium,
FR-6 Points System,Scoring non-negative bounded,AC-6.2,TDD §4.7 Points,,AC-6.2,apps/backend/tests/api/points/scoring_bounds.unit.test.ts,unit,reports/AC-6.2.json,QA:Points,pending,,Medium,
FR-6 Points System,Anti-gaming checks logged on threshold breach,AC-6.3,TDD §4.7 Points,,AC-6.3,apps/backend/tests/api/points/anti_gaming.perf.security.test.ts,perf,reports/AC-6.3.json,QA:Points,pending,,Medium,
FR-6 Points System,API/UI never expose scoring internals,AC-6.4,TDD §4.7 Points,,AC-6.4,apps/backend/tests/api/points/no_scoring_leak.contract.test.ts,contract,reports/AC-6.4.json,QA:Points,pending,,Medium,
FR-6 Points System,Admin adjustments create immutable audit entry,AC-6.5,TDD §4.7 Points,,AC-6.5,apps/backend/tests/api/points/admin_adjust_audit.security.test.ts,security,reports/AC-6.5.json,QA:Points,pending,,Medium,
FR-7 Sharing & Community,Default privacy = private,AC-7.1,TDD §4.8 Feed,,AC-7.1,apps/backend/tests/api/feed/default_private.unit.test.ts,unit,reports/AC-7.1.json,QA:Feed,pending,,Low,
FR-7 Sharing & Community,Public feed paginated + searchable,AC-7.2,TDD §4.8 Feed,,AC-7.2,apps/backend/tests/api/feed/feed_pagination.integration.test.ts,integration,reports/AC-7.2.json,QA:Feed,pending,,Low,
FR-7 Sharing & Community,Cloned session includes attribution metadata,AC-7.3,TDD §4.8 Feed,,AC-7.3,apps/backend/tests/api/feed/clone_feed_attribution.e2e.ts,e2e,reports/AC-7.3.json,QA:Feed,pending,,Low,
FR-8 Internationalization (i18n),Language auto-detected from browser/profile,AC-8.1,TDD §4.10 i18n,,AC-8.1,apps/frontend/tests/i18n/auto_detect.unit.test.ts,unit,reports/AC-8.1.json,QA:i18n,pending,,Low,
FR-8 Internationalization (i18n),Manual language switch persists,AC-8.2,TDD §4.10 i18n,,AC-8.2,apps/frontend/tests/i18n/persist_switch.e2e.ts,e2e,reports/AC-8.2.json,QA:i18n,pending,,Low,
FR-8 Internationalization (i18n),All UI strings from static catalogs (EN/DE),AC-8.3,TDD §4.10 i18n,,AC-8.3,apps/frontend/tests/i18n/catalog_static.unit.test.ts,unit,reports/AC-8.3.json,QA:i18n,pending,,Low,
FR-8 Internationalization (i18n),No untranslated keys; fallback EN; lint prevents literals,AC-8.4,TDD §4.10 i18n,,AC-8.4,apps/frontend/tests/i18n/lint_tokens.static.test.ts,static,reports/AC-8.4.json,QA:i18n,pending,,Low,
FR-8 Internationalization (i18n),DSR delete removes translation caches,AC-8.5,TDD §4.10 i18n,,AC-8.5,apps/frontend/tests/i18n/dsr_translation_cache.integration.test.ts,integration,reports/AC-8.5.json,QA:i18n,pending,,Low,
NFR-Security,Security headers: CSP no unsafe-inline; cookies HttpOnly;Secure;SameSite=Lax,SEC-HEADERS,TDD §10 Security,,SEC-HEADERS,tests/security/headers.policy.test.ts,security,reports/security/headers.html,SecEng,pending,,High,
NFR-Security,"ZAP baseline (auth ctx, admin routes, feed privacy) no High",SEC-ZAP,TDD §10; §12,,SEC-ZAP,tests/security/zap.baseline.yaml,security,reports/security/zap.html,SecEng,pending,,High,
NFR-Security,TLS1.3 + OCSP stapling + HSTS + Referrer/Permissions-Policy,SEC-TLS,TDD §12 Edge,,SEC-TLS,tests/security/tls.edge.scan.yaml,security,reports/security/tls.html,SecEng,pending,,Medium,
NFR-SupplyChain,SBOM per build; cosign sign & verify; pinned digests,SC-SBOM,TDD §12 Delivery,,SC-SBOM,tests/supplychain/sbom_sign_verify.mjs,supplychain,reports/supplychain/sbom.json,DevOps,pending,,High,
NFR-Perf,API group budgets (auth≤200ms crud≤300ms feed≤400ms analytics≤600ms),PERF-BUDGETS,TDD §10 Perf,,PERF-BUDGETS,tests/perf/k6/budgets.js,perf,reports/perf/k6_budgets.json,DevOps,pending,,High,
NFR-Perf,Regression guard: fail on >10% p95 baseline regression,PERF-GUARD,TDD §10 Perf,,PERF-GUARD,tests/perf/k6/regression_guard.js,perf,reports/perf/regression.json,DevOps,pending,,High,
NFR-WebPerf,LCP P75 <2.5s; ≤5 API calls on first paint,WEBPERF-LCP,TDD §10 FE Perf,,WEBPERF-LCP,tests/webperf/lighthouse.budget.js,a11y/perf,reports/webperf/lighthouse.json,FE,pending,,Medium,
NFR-A11y,WCAG 2.1 AA; axe/Lighthouse ≥90,A11Y-CORE,TDD §8.5 Accessibility,,A11Y-CORE,tests/accessibility/axe.lh.spec.ts,a11y,reports/a11y/summary.json,UX/QA,pending,,Medium,
NFR-Obs,"/metrics exposes histograms with {method,route,status_code}",OBS-METRICS,TDD §13 Observability,,OBS-METRICS,tests/metrics/prom_exposure.test.ts,observability,reports/metrics/exposure.json,DevOps,pending,,Medium,
NFR-Obs,DB histogram db_query_duration_ms present,OBS-DB,TDD §13 Observability,,OBS-DB,tests/metrics/db_histogram.test.ts,observability,reports/metrics/db_hist.json,DevOps,pending,,Medium,
NFR-Obs,RUM gauge frontend_lcp_ms present & scraped,OBS-RUM,TDD §13 Observability,,OBS-RUM,tests/metrics/rum_gauge.test.ts,observability,reports/metrics/rum.json,FE,pending,,Low,
NFR-Availability,SLO ≥99.5% monthly; error budget ≤0.5%,AVAIL-SLO,TDD §11 Ops,,AVAIL-SLO,tests/ops/slo_budget.rule.test.ts,ops,reports/ops/slo.html,DevOps,pending,,Medium,
NFR-GDPR,Consent gating; no non-essential analytics pre opt-in,GDPR-CONSENT,TDD §12 Privacy,,GDPR-CONSENT,tests/e2e/consent_banner.network.spec.ts,e2e,reports/gdpr/consent.json,QA,pending,,High,
NFR-GDPR,DSR SLA ≤30d; evidence bundle,GDPR-DSR,TDD §12 Privacy,,GDPR-DSR,tests/compliance/dsr_sla.audit.test.ts,compliance,reports/gdpr/dsr_bundle.zip,Privacy,pending,,High,
NFR-DR,Delete propagation to backups ≤14d (erasure-replay),DR-ERASURE,TDD §13 DR,,DR-ERASURE,tests/dr/restore_erasure_replay.test.ts,dr,reports/dr/erasure_replay.log,DevOps,pending,,High,
NFR-DR,RPO ≤24h; RTO ≤4h — quarterly restore drill,DR-RPO-RTO,TDD §13 DR,,DR-RPO-RTO,tests/dr/restore_rpo_rto.runbook.md,dr,reports/dr/restore_summary.md,DevOps,pending,,High,
NFR-Visual,Design tokens contract (CSS vars),VIZ-TOK-03,VDD §Tokens,VDD §Tokens,VIZ-TOK-03,tests/visual/tokens.contract.spec.ts,visual,reports/visual/tokens.json,Design/QA,pending,,Medium,
NFR-Visual,"Visual regression (Auth, Planner, Logger, Dashboard) light/dark xs/sm/md/lg",VIZ-SNAP-02,VDD §Components,VDD §Components,VIZ-SNAP-02,tests/visual/snapshots.spec.ts,visual,reports/visual/diffs/*.png,Design/QA,pending,,Medium,
NFR-Visual,Reduced-motion honored; no info via animation only,VIZ-MOTION-09,VDD §Motion,VDD §Motion,VIZ-MOTION-09,tests/visual/reduced_motion.spec.ts,visual,reports/visual/motion.json,Design/QA,pending,,Low,
NFR-Visual,Responsive guard; no horizontal overflow; long-DE strings,VIZ-RESP-05,VDD §Layout,VDD §Layout,VIZ-RESP-05,tests/visual/responsive.spec.ts,visual,reports/visual/responsive.json,Design/QA,pending,,Low,
NFR-Contract,zod ↔ OpenAPI parity; negative assertions,CNTR-OPENAPI,TDD §2d API,,CNTR-OPENAPI,tests/contract/openapi_parity.spec.ts,contract,reports/contract/openapi.json,BE,pending,,High,
NFR-DB,Required indexes; migrations monotonic; no drift,DB-CONTRACTS,TDD §2c Data,,DB-CONTRACTS,tests/db/contracts.spec.ts,db,reports/db/contracts.html,BE/DBA,pending,,High,
